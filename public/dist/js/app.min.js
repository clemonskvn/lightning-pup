angular.module("lpApp",["ngRoute","appRoutes","MainCtrl","HelpCtrl","UserDetailCtrl","UserDetailService","TestCtrl","TestService","lpValidateDirectives"]),angular.module("appRoutes",[]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/home.html",controller:"MainController"}).when("/help",{templateUrl:"views/help.html",controller:"HelpController"}).when("/profile",{templateUrl:"views/userdetails.html",controller:"UserDetailController"}).when("/test",{templateUrl:"views/test.html",controller:"TestController"}),b.html5Mode(!0)}]),angular.module("HelpCtrl",[]).controller("HelpController",["$scope",function(a){a.email="",a.subject=""}]),angular.module("MainCtrl",[]).controller("MainController",["$scope",function(a){a.tagline="To the moon and back!",a.user="test",a.pass="123"}]),angular.module("TestCtrl",[]).controller("TestController",["$scope","Test","$window",function(a,b,c){a.formData={},b.get().then(function(b){a.test=b}),a.submit=function(d){b.create(d).then(function(b){a.message=b,c.location.href="/test"})},a.tagline="Awesome user is awesome!"}]),angular.module("UserDetailCtrl",[]).controller("UserDetailController",["$scope","$window","UserDetail",function(a,b,c){a.formData={},a.checkValidity=function(a){return c.checkValidity(a)},c.get().then(function(b){a.users=b}),a.checkPassword=function(){a.formData.password===a.formData.validate_password?a.newUserForm.validate_password.$setValidity("mismatchPassword",!0):a.newUserForm.validate_password.$setValidity("mismatchPassword",!1)},a.resetPasswordValidity=function(){a.newUserForm.password.$setValidity("mismatchPassword",!0),a.newUserForm.password.$setValidity("passwordInvalidLength",!0),a.newUserForm.password.$setValidity("passwordInvalidUpper",!0),a.newUserForm.password.$setValidity("passwordInvalidLower",!0),a.newUserForm.password.$setValidity("passwordInvalidNumeric",!0),a.newUserForm.password.$setValidity("passwordInvalidNonalpha",!0)},a.phoneTypeOptions=[{id:1,label:"MOBILE"},{id:2,label:"WORK"},{id:3,label:"HOME"},{id:4,label:"FAX"},{id:5,label:"PAGER"},{id:6,label:"OTHER"}],a.formData.phone_type=a.phoneTypeOptions[0],a.submit=function(b){c.create(b).then(function(b){console.log("test"),a.message=b})}}]),angular.module("lpValidateDirectives",[]).directive("lpValidateUsername",function(){var a=/^[a-z][a-z0-9_.\']*$/i;return{restrict:"A",require:"ngModel",link:function(b,c,d,e){e.$validators.lpValidateUsername=function(b,c){return a.test(c)?(e.$setValidity("usernameInvalidFormat",!0),!0):(e.$setValidity("usernameExists",!0),e.$setValidity("usernameInvalidFormat",!1),!1)}}}}).directive("lpValidatePassword",function(){var a=/[A-Z]/,b=/[a-z]/,c=/\d/,d=/\W/;return{restrict:"A",require:"ngModel",link:function(e,f,g,h){h.$validators.lpValidatePassword=function(f,g){return void 0===g?(e.resetPasswordValidity(),h.$setValidity("passwordInvalidLength",!1),!1):g.length<8?(e.resetPasswordValidity(),h.$setValidity("passwordInvalidLength",!1),!1):a.test(g)?b.test(g)?c.test(g)?d.test(g)?(e.resetPasswordValidity(),!0):(e.resetPasswordValidity(),h.$setValidity("passwordInvalidNonalpha",!1),!1):(e.resetPasswordValidity(),h.$setValidity("passwordInvalidNumeric",!1),!1):(e.resetPasswordValidity(),h.$setValidity("passwordInvalidLower",!1),!1):(e.resetPasswordValidity(),h.$setValidity("passwordInvalidUpper",!1),!1)}}}}).directive("lpValidateUniqueUsername",["$q","UserDetail",function(a,b){return{restrict:"A",require:"ngModel",link:function(c,d,e,f){f.$asyncValidators.username=function(c,d){return a(function(a,c){b.checkValidity(d).then(function(b){null===b.data?(f.$setValidity("usernameExists",!0),a()):(f.$setValidity("usernameExists",!1),c(b.data.errorMessage))})})}}}}]).directive("lpValidateEmail",function(){var a=/\b[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}\b/i;return{restrict:"A",require:"ngModel",link:function(b,c,d,e){e.$validators.lpValidateEmail=function(b,c){return a.test(c)?(e.$setValidity("emailInvalidFormat",!0),!0):(e.$setValidity("emailInvalidFormat",!1),!1)}}}}).directive("lpValidateName",function(){var a=/^[a-z][a-z\s,.\-\']*$/i;return{restrict:"A",require:"ngModel",link:function(b,c,d,e){e.$validators.lpValidateName=function(b,c){return a.test(c)?(e.$setValidity("nameInvalidFormat",!0),!0):(e.$setValidity("nameInvalidFormat",!1),!1)}}}}),angular.module("TestService",[]).factory("Test",["$http",function(a){return{get:function(){return a.get("/api/test")},create:function(b){return a.post("/api/test",b)}}}]),angular.module("UserDetailService",[]).factory("UserDetail",["$http",function(a){return{get:function(){return a.get("/api/user")},create:function(b){return a.post("/api/user",b)},"delete":function(b){return a["delete"]("/api/user/"+b)},checkValidity:function(b){return a.get("/api/user/"+b)}}}]);